/* Implementation of a 32-bit adder in C.
 *
 * Author: Parker Gabel
 */

#include "sim1.h"

void execute_add(Sim1Data *obj)
{
  // Initialize obj->sum to 
  // Initialize carry to 1 is subtraction flag is set else   
    int carry = 0;
    int a_input, b_input, sum;
    for(int i = 0; i < 32; i++) {
      // (a - b) = a + (-b) = a + (~b + 1) = (a + ~b) + 1
      // Use if statement to flip b_input if subtraction flag is set.
        a_input = (obj->a >> i) & 0x1;
        b_input = (obj->b >> i) & 0x1;
        sum = (a_input ^ b_input) ^ carry;
        carry = ((a_input ^ b_input) && carry) || (a_input && b_input);
	// If sum != 0 then turn on bit at specific place
        obj->sum = sum | (0x1 << i);
    }
}

